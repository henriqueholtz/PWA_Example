{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{CameraType}from\"./Camera.types\";import{canGetUserMedia,isBackCameraAvailableAsync,isFrontCameraAvailableAsync}from\"./WebUserMediaManager\";export default{get name(){return'ExponentCameraManager';},get Type(){return{back:'back',front:'front'};},get FlashMode(){return{on:'on',off:'off',auto:'auto',torch:'torch'};},get AutoFocus(){return{on:'on',off:'off',auto:'auto',singleShot:'singleShot'};},get WhiteBalance(){return{auto:'auto',continuous:'continuous',manual:'manual'};},get VideoQuality(){return{};},isAvailableAsync:function isAvailableAsync(){return _regeneratorRuntime.async(function isAvailableAsync$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",canGetUserMedia());case 1:case\"end\":return _context.stop();}}},null,null,null,Promise);},takePicture:function takePicture(options,camera){return _regeneratorRuntime.async(function takePicture$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(camera.takePicture(options));case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},null,null,null,Promise);},pausePreview:function pausePreview(camera){return _regeneratorRuntime.async(function pausePreview$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(camera.pausePreview());case 2:case\"end\":return _context3.stop();}}},null,null,null,Promise);},resumePreview:function resumePreview(camera){return _regeneratorRuntime.async(function resumePreview$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(camera.resumePreview());case 2:return _context4.abrupt(\"return\",_context4.sent);case 3:case\"end\":return _context4.stop();}}},null,null,null,Promise);},getAvailableCameraTypesAsync:function getAvailableCameraTypesAsync(){var devices,types;return _regeneratorRuntime.async(function getAvailableCameraTypesAsync$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!canGetUserMedia()||!navigator.mediaDevices.enumerateDevices)){_context5.next=2;break;}return _context5.abrupt(\"return\",[]);case 2:_context5.next=4;return _regeneratorRuntime.awrap(navigator.mediaDevices.enumerateDevices());case 4:devices=_context5.sent;_context5.t0=_regeneratorRuntime;_context5.t1=Promise;_context5.next=9;return _regeneratorRuntime.awrap(isFrontCameraAvailableAsync(devices));case 9:_context5.t2=_context5.sent;if(!_context5.t2){_context5.next=12;break;}_context5.t2=CameraType.front;case 12:_context5.t3=_context5.t2;_context5.next=15;return _regeneratorRuntime.awrap(isBackCameraAvailableAsync());case 15:_context5.t4=_context5.sent;if(!_context5.t4){_context5.next=18;break;}_context5.t4=CameraType.back;case 18:_context5.t5=_context5.t4;_context5.t6=[_context5.t3,_context5.t5];_context5.t7=_context5.t1.all.call(_context5.t1,_context5.t6);_context5.next=23;return _context5.t0.awrap.call(_context5.t0,_context5.t7);case 23:types=_context5.sent;return _context5.abrupt(\"return\",types.filter(Boolean));case 25:case\"end\":return _context5.stop();}}},null,null,null,Promise);},getAvailablePictureSizes:function getAvailablePictureSizes(ratio,camera){return _regeneratorRuntime.async(function getAvailablePictureSizes$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(camera.getAvailablePictureSizes(ratio));case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}},null,null,null,Promise);}};","map":{"version":3,"sources":["../src/ExponentCameraManager.web.ts"],"names":[],"mappings":"4DAAA,OAAsD,UAAtD,sBAEA,OACE,eADF,CAEE,0BAFF,CAGE,2BAHF,6BAMA,cAAe,CACb,GAAI,CAAA,IAAJ,EAAQ,CACN,MAAO,uBAAP,CACD,CAHY,CAIb,GAAI,CAAA,IAAJ,EAAQ,CACN,MAAO,CACL,IAAI,CAAE,MADD,CAEL,KAAK,CAAE,OAFF,CAAP,CAID,CATY,CAUb,GAAI,CAAA,SAAJ,EAAa,CACX,MAAO,CACL,EAAE,CAAE,IADC,CAEL,GAAG,CAAE,KAFA,CAGL,IAAI,CAAE,MAHD,CAIL,KAAK,CAAE,OAJF,CAAP,CAMD,CAjBY,CAkBb,GAAI,CAAA,SAAJ,EAAa,CACX,MAAO,CACL,EAAE,CAAE,IADC,CAEL,GAAG,CAAE,KAFA,CAGL,IAAI,CAAE,MAHD,CAIL,UAAU,CAAE,YAJP,CAAP,CAMD,CAzBY,CA0Bb,GAAI,CAAA,YAAJ,EAAgB,CACd,MAAO,CACL,IAAI,CAAE,MADD,CAEL,UAAU,CAAE,YAFP,CAGL,MAAM,CAAE,QAHH,CAAP,CAKD,CAhCY,CAiCb,GAAI,CAAA,YAAJ,EAAgB,CACd,MAAO,EAAP,CACD,CAnCY,CAoCP,gBApCO,uLAqCJ,eAAe,EArCX,wEAuCP,WAvCO,sBAwCX,OAxCW,CAyCX,MAzCW,4KA2CE,MAAM,CAAC,WAAP,CAAmB,OAAnB,CA3CF,iIA6CP,YA7CO,uBA6CM,MA7CN,6KA8CL,MAAM,CAAC,YAAP,EA9CK,yEAgDP,aAhDO,wBAgDO,MAhDP,8KAiDE,MAAM,CAAC,aAAP,EAjDF,iIAmDP,4BAnDO,yMAoDP,CAAC,eAAe,EAAhB,EAAsB,CAAC,SAAS,CAAC,YAAV,CAAuB,gBApDvC,4DAoDgE,EApDhE,2DAsDW,SAAS,CAAC,YAAV,CAAuB,gBAAvB,EAtDX,SAsDL,OAtDK,8DAwD4B,OAxD5B,mDAyDF,2BAA2B,CAAC,OAAD,CAzDzB,6FAyDuC,UAAU,CAAC,KAzDlD,sFA0DF,0BAA0B,EA1DxB,8FA0D+B,UAAU,CAAC,IA1D1C,sGAwDoC,GAxDpC,qHAwDL,KAxDK,iDA6DJ,KAAK,CAAC,MAAN,CAAa,OAAb,CA7DI,0EA+DP,wBA/DO,mCA+DkB,KA/DlB,CA+DiC,MA/DjC,yLAgEE,MAAM,CAAC,wBAAP,CAAgC,KAAhC,CAhEF,iIAAf","sourcesContent":["import { CameraCapturedPicture, CameraPictureOptions, CameraType } from './Camera.types';\nimport { ExponentCameraRef } from './ExponentCamera.web';\nimport {\n  canGetUserMedia,\n  isBackCameraAvailableAsync,\n  isFrontCameraAvailableAsync,\n} from './WebUserMediaManager';\n\nexport default {\n  get name(): string {\n    return 'ExponentCameraManager';\n  },\n  get Type() {\n    return {\n      back: 'back',\n      front: 'front',\n    };\n  },\n  get FlashMode() {\n    return {\n      on: 'on',\n      off: 'off',\n      auto: 'auto',\n      torch: 'torch',\n    };\n  },\n  get AutoFocus() {\n    return {\n      on: 'on',\n      off: 'off',\n      auto: 'auto',\n      singleShot: 'singleShot',\n    };\n  },\n  get WhiteBalance() {\n    return {\n      auto: 'auto',\n      continuous: 'continuous',\n      manual: 'manual',\n    };\n  },\n  get VideoQuality() {\n    return {};\n  },\n  async isAvailableAsync(): Promise<boolean> {\n    return canGetUserMedia();\n  },\n  async takePicture(\n    options: CameraPictureOptions,\n    camera: ExponentCameraRef\n  ): Promise<CameraCapturedPicture> {\n    return await camera.takePicture(options);\n  },\n  async pausePreview(camera: ExponentCameraRef): Promise<void> {\n    await camera.pausePreview();\n  },\n  async resumePreview(camera: ExponentCameraRef): Promise<void> {\n    return await camera.resumePreview();\n  },\n  async getAvailableCameraTypesAsync(): Promise<string[]> {\n    if (!canGetUserMedia() || !navigator.mediaDevices.enumerateDevices) return [];\n\n    const devices = await navigator.mediaDevices.enumerateDevices();\n\n    const types: (string | null)[] = await Promise.all([\n      (await isFrontCameraAvailableAsync(devices)) && CameraType.front,\n      (await isBackCameraAvailableAsync()) && CameraType.back,\n    ]);\n\n    return types.filter(Boolean) as string[];\n  },\n  async getAvailablePictureSizes(ratio: string, camera: ExponentCameraRef): Promise<string[]> {\n    return await camera.getAvailablePictureSizes(ratio);\n  },\n\n  // TODO(Bacon): Is video possible?\n  // record(options): Promise\n  // stopRecording(): Promise<void>\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}